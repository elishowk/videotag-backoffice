{% load static %}
{% load url from future %}
{% load uservoice %}
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8" />
        <title>{% block head_title %}CommonPlay{% endblock %}</title>
        <link rel="stylesheet" href="{% get_static_prefix %}lib/bootstrap-2.2.2/css/bootstrap.min.css"/>
        <link rel="stylesheet" href="{% get_static_prefix %}lib/bootstrap-datepicker-2.0/css/datepicker.css"/>
        <link rel="stylesheet" href="{% get_static_prefix %}lib/bootstrap-timepicker-2.0/compiled/timepicker.css"/>
        <link rel="stylesheet" href="{% get_static_prefix %}videotag-backoffice/css/backoffice.css"/>
    </head>
    <body>
        <div class="container-fluid" id="mainDiv">
            <div class="row-fluid" id="header">
                <a href="#" >
                     <img class="logo" src="{% get_static_prefix %}videotag-backoffice/img/logo.svg" alt="Logo CommonPlay" />
                </a>
                <div class="navbar">
                    <div class="navbar-inner">
                        <div class='container-fluid'>
                            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </a>
                            <div class="nav-collapse">
                                <ul class="nav">
                                    <li><a href="/">Dashboard</a></li>
                                    <li class="dropdown">
                                        <a href="#" class="dropdown-toggle gravatar" data-toggle="dropdown"> Account <b class="caret"></b></a>
                                        <ul class="dropdown-menu">
                                            <li><a href="/#account">Account</a></li>
                                            <li><a href="{% url 'account_password' %}">Mot de passe</a></li>
                                            <li><a href="{% url 'account_settings' %}">Change Email</a></li>
                                            <li><a href="{% url 'account_logout' %}">DÃ©connexion</a></li>
                                            <li class="divider"></li>
                                            <li><a href="{% url 'account_delete' %}">Supprimer</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div><!--/.nav-collapse -->
                        </div>
                    </div>
                </div>
            </div>
            {% block body %}
                <div class="row-fluid"><div class='span12 externalTemplate well'>{% block template %}{% endblock %}</div></div>
            {% endblock %}
        </div>
        <div class="container-fuild well" id="footer">
            <div class="row-fuild">
                <div class="span2">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="">About Us</a></li>
                        <li><a href="">Contact</a></li>
                    </ul>
                </div>
                <div class="span2">
                    <h4>Resource</h4>
                    <ul>
                        <li><a href="">Get help</a></li>
                        <li><a href="">FAQ</a></li>
                        <li><a href="">Support</a></li>
                    </ul>
                </div>
                <div class="span2">
                    <h4>Connect</h4>
                    <ul>
                        <li><a href="" title="Facebook">Facebook</a></li>
                        <li><a href="" title="Twitter">Twitter</a></li>
                        <li><a href="" title="Blogs">Blogs</a></li>
                    </ul>
                </div>
            </div>
        </div>
        {% if request.user.is_authenticated %}
        <script>
            (function () {
                'use strict';
                /**
                 * retrieve config
                 */
                var config = {
                    'baseUrl': '{% get_static_prefix %}',
                    'feedsApiUrl': '{{ feedsApiUrl }}',
                    'poserApiUrl': '{{ poserApiUrl }}',
                    'melomaniacApiUrl': '{{ melomaniacApiUrl }}',
                    'sockjsUrl': '{{ sockjsUrl }}',
                    'loginUrl': '{{ request.build_absolute_uri|slice:':-1' }}{% url 'account_login' %}',
                    'logoutUrl': '{{ request.build_absolute_uri|slice:':-1' }}{% url 'account_logout' %}',
                    'signupUrl': '{{ request.build_absolute_uri|slice:':-1' }}{% url 'account_signup' %}',
                    'passwordResetUrl': '{{ request.build_absolute_uri|slice:':-1' }}{% url 'account_password_reset' %}',
                    'passwordChangeUrl': '{{ request.build_absolute_uri|slice:':-1' }}{% url 'account_password' %}',
                    'accountSettingsUrl': '{{ request.build_absolute_uri|slice:':-1' }}{% url 'account_settings' %}',
                    'accountDeleteUrl': '{{ request.build_absolute_uri|slice:':-1' }}{% url 'account_delete' %}',
                    'hostUrl': '{{ request.build_absolute_uri|slice:':-1' }}',
                    'inviteUrl': '{{ request.build_absolute_uri|slice:':-1' }}{% url 'invite' %}',
                };
                /**
                 * requirejs
                 */
                var script = document.createElement('script');
                script.addEventListener('load', function () {
                    require.appConfig = config;
                    require.appUser = {
                        isAuthenticated: '{{ request.user.is_authenticated }}',
                        id: '{{ request.user.id }}',
                        username: '{{ request.user.username }}',
                        email: '{{ request.user.email }}',
                        is_anonymous: '{{ request.user.is_anonymous }}',
                        csrf: '{{ csrf_token }}',
                    };
                });
                script.setAttribute('src', config.baseUrl + 'lib/require-2.1.2.min.js');
                script.setAttribute('data-main', config.baseUrl + 'videotag-backoffice/main.js');
                document.head.appendChild(script);
            }).call(window);
        </script>
        {% endif %}
        {% uservoice %}
    </body>
</html>
